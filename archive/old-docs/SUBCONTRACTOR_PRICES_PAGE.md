# דף מחירון קבלן משנה - תיעוד

## מסלול
`http://localhost:3010/subcontractors/{id}/prices`

## תכונות

### 1. תצוגה מסודרת
- ✅ טבלה עם כל פרטי המחיר (נסיעה, טון, מ״ק, ק״מ, מינימום)
- ✅ תאריכי תוקף (מ-עד)
- ✅ סטטוסים צבעוניים (פעיל/פג תוקף/עתידי)
- ✅ מיון אוטומטי לפי תאריך (החדשים ראשון)

### 2. פילטרים
- **פעילים** - מחירונים תקפים כרגע
- **פג תוקף** - מחירונים שעבר תוקפם
- **הכל** - כל המחירונים

### 3. סטטיסטיקות
קלפים עם:
- מספר מחירונים פעילים (ירוק)
- מספר מחירונים שפג תוקפם (כתום)
- מספר מחירונים עתידיים (כחול)
- סה״כ מחירונים (סגול)

### 4. פעולות על מחירון
- ✏️ **ערוך** - עריכת מחירון קיים
- 📋 **שכפל** - יצירת מחירון חדש מבוסס על קיים (עם תאריכים חדשים)
- 🗑️ **מחק** - מחיקת מחירון

### 5. טופס הוספה/עריכה
שדות:
- מחיר לנסיעה (₪)
- מחיר לטון (₪)
- מחיר למ״ק (₪)
- מחיר לק״מ (₪)
- מינימום חיוב (₪)
- תוקף מתאריך (חובה)
- תוקף עד תאריך (אופציונלי - ריק = ללא תאריך סיום)
- הערות (אופציונלי)

**אימות**: חייב למלא לפחות סוג מחיר אחד

### 6. ניווט
מהדף הראשי של קבלן משנה:
- כפתור "📊 דף מחירון מלא" בפינה הימנית של הטאבים
- כפתור "💰 מחירונים" בכרטיס הקבלן ברשימה

## API Endpoints בשימוש
- `GET /api/subcontractors/{id}` - פרטי קבלן
- `GET /api/subcontractors/{id}/prices` - רשימת מחירונים
- `POST /api/subcontractors/{id}/prices` - הוספת מחירון
- `PATCH /api/subcontractors/{id}/prices/{price_id}` - עדכון מחירון
- `DELETE /api/subcontractors/{id}/prices/{price_id}` - מחיקת מחירון

## עיצוב
- תצוגה מלאה עם DashboardLayout
- טבלה רספונסיבית עם גלילה אופקית במסכים קטנים
- צבעים בהירים ומודרניים
- אייקונים מ-lucide-react
- הודעות הצלחה/שגיאה

## תרחישי שימוש

### הוספת מחירון חדש
1. לחץ "מחירון חדש" (ירוק)
2. מלא לפחות סוג מחיר אחד
3. בחר תאריך התחלה
4. (אופציונלי) בחר תאריך סיום
5. לחץ "שמור מחירון"

### שכפול מחירון
1. לחץ על כפתור "שכפל" (ירוק) בשורה של מחירון קיים
2. הטופס ייפתח עם כל הנתונים מהמחירון המקורי
3. תאריך ההתחלה יהיה היום
4. תאריך הסיום יהיה ריק
5. ההערות יכללו "(העתק)"
6. שנה מה שצריך ושמור

### עריכת מחירון
1. לחץ "ערוך" (כחול)
2. שנה את הנתונים הרצויים
3. לחץ "עדכן מחירון"

### מחיקת מחירון
1. לחץ "מחק" (אדום)
2. אשר את המחיקה
3. המחירון יימחק מיידית

## הערות טכניות
- מחירונים ממוינים אוטומטית לפי תאריך התחלה (חדשים ראשון)
- מחירונים ללא תאריך סיום מוצגים עם "∞"
- כל השדות הכספיים מאפשרים עד 2 ספרות אחרי הנקודה
- טופס פתוח נשאר פתוח עד ביטול או שמירה מוצלחת
